<%- include('../includes/header.ejs') %>
<%- include('../includes/sidebar.ejs') %>


<header>ID: <%= Id_Tipo_Incidencia%></header><br><br>
<header>Nombre: </header><input id="Nombre_Tipo_Incidencia" type="text" name="Nombre_Tipo_Incidencia" value="<%= Tipo_Incidencia[0].Nombre_Tipo_Incidencia %>" onkeyup = "cambio()" required><br>
<header>SLA: </header><input id="SLA"  type="number" step="1" min="0" name="SLA" value="<%= Tipo_Incidencia[0].SLA %>" onchange = "cambio ()" required><br><br>

<select class="form-select-label" multiple data-live-search="true" id="select_preguntas" name="preguntas" aria-label="Default select example" onchange = "cambio ()">
    <option id="Preguntas:" selected disabled>Preguntas:</option>
    <% for(let pregunta of Preguntas_all) { %>
        <% let selected = false; %>
        <% for(let pregunta2 of Preguntas_act){ %>
            <% if(pregunta.Texto_Pregunta.replace(/\s/g,'_') == pregunta2.Texto_Pregunta.replace(/\s/g,'_')){ %>
                <% selected = true; %>
            <% } %>
        <% } %>
        <option class="opcionPregunta" <%= selected ? "selected" : "" %> id="<%= pregunta.Texto_Pregunta.replace(/\s/g,'_') %>" value="<%= pregunta.Texto_Pregunta.replace(/\s/g,'_') %>"><%= pregunta.Texto_Pregunta.replace(/_/g, ' ') %></option>
                
    <% }%>
</select><br>

<div id="button_cambios"></div>

<input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>">
<input type="hidden" name="id_tp" id="id_tp" value="<%= Id_Tipo_Incidencia%>">

<% let cont = 0%>
<% for(let pregunta2 of Preguntas_act){ %>
    <input type="hidden" name="ACT_<%=cont%>" id="ACT_<%=cont%>" value="<%= pregunta2.Texto_Pregunta.replace(/\s/g,'_') %>">
    <% cont++ %>
<% } %>
<input type="hidden" name="cont" id="cont" value="<%= cont-1 %>">
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta2/dist/js/bootstrap-select.min.js"></script>
<script src="/js/script_modificar_tipo_incidencia.js"></script>

<%- include('../includes/foot.ejs') %>